<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>é£æœºå¤§æˆ˜ - é˜¶æ®µä¸€æµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f4f4f4; }
        h2 { color: #333; }
        #log { border: 1px solid #ccc; height: 300px; overflow-y: auto;
            padding: 5px; margin-top: 10px; background: #fff; }
        .msg-send { color: blue; }
        .msg-recv { color: green; }
        .msg-sys { color: gray; font-style: italic; }
        input { padding: 5px; width: 250px; }
        button { padding: 6px 12px; margin-left: 5px; }
    </style>
</head>
<body>
<h2>ğŸš€ é˜¶æ®µä¸€ WebSocket æµ‹è¯•</h2>
<p>ç”¨äºéªŒè¯æœåŠ¡ç«¯ `/ws` æ˜¯å¦æ­£å¸¸å·¥ä½œ</p>

<div>
    <input id="msgInput" type="text" placeholder="è¾“å…¥è¦å‘é€çš„æ¶ˆæ¯..." />
    <button onclick="sendMsg()">å‘é€</button>
</div>

<div id="log"></div>

<script>
    let ws;
    let logDiv = document.getElementById("log");

    function log(message, type="msg-sys") {
        let p = document.createElement("p");
        p.className = type;
        p.textContent = message;
        logDiv.appendChild(p);
        logDiv.scrollTop = logDiv.scrollHeight;
    }

    function connect() {
        ws = new WebSocket("ws://localhost:8080/ws");

        ws.onopen = () => log("âœ… å·²è¿æ¥æœåŠ¡å™¨");
        ws.onmessage = (evt) => log("ğŸ“© æ”¶åˆ°: " + evt.data, "msg-recv");
        ws.onclose = () => log("âŒ è¿æ¥å·²å…³é—­");
        ws.onerror = (err) => log("âš ï¸ å‡ºé”™: " + err);
    }

    function sendMsg() {
        let input = document.getElementById("msgInput");
        let msg = input.value;
        if (msg && ws && ws.readyState === WebSocket.OPEN) {
            ws.send(msg);
            log("ğŸ“¤ å‘é€: " + msg, "msg-send");
            input.value = "";
        }
    }

    window.onload = connect;
</script>
</body>
</html>
